name: Zen Parser

on:
  schedule:
    - cron: '0 6 * * *'  # ĞšĞ°Ğ¶Ğ´Ñ‹Ğ¹ Ğ´ĞµĞ½ÑŒ Ğ² 06:00 UTC (09:00 ĞœĞ¡Ğš)
  workflow_dispatch:       # Ğ ÑƒÑ‡Ğ½Ğ¾Ğ¹ Ğ·Ğ°Ğ¿ÑƒÑĞº

jobs:
  parse-articles:
    runs-on: ubuntu-latest
    
    steps:
    - name: ğŸ“¥ Checkout code
      uses: actions/checkout@v4
      
    - name: â” Setup Node.js
      uses: actions/setup-node@v4
      with:
        node-version: '18'
        cache: 'npm'
        
    - name: ğŸ“¦ Install dependencies
      run: npm install
      
    - name: ğŸš€ Run parser
      run: node parser.js
      
    - name: ğŸ’¾ Upload Excel results
      uses: actions/upload-artifact@v4
      with:
        name: zen-articles
        path: results/Ğ¡Ñ‚Ğ°Ñ‚ÑŒĞ¸ Ğ”Ğ·ĞµĞ½/  # Ğ˜Ğ¡ĞŸĞ ĞĞ’Ğ›Ğ•ĞĞĞ«Ğ™ ĞŸĞ£Ğ¢Ğ¬
        retention-days: 30
        
    - name: ğŸ“Š Display results
      run: |
        echo "âœ… ĞŸĞ°Ñ€ÑĞ¸Ğ½Ğ³ Ğ·Ğ°Ğ²ĞµÑ€ÑˆĞµĞ½!"
        echo "ğŸ“ Ğ¤Ğ°Ğ¹Ğ»Ñ‹ ÑĞ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ñ‹ Ğ² Ğ°Ñ€Ñ‚ĞµÑ„Ğ°ĞºÑ‚Ğ°Ñ…"
        echo "â° Ğ’Ñ€ĞµĞ¼Ñ: $(date)"
        echo "ğŸ“‚ ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑĞµĞ¼ ÑĞ¾Ğ·Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ Ñ„Ğ°Ğ¹Ğ»Ñ‹:"
        find results/ -name "*.xlsx" -o -name "*.csv" | head -10